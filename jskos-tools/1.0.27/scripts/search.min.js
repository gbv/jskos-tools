var searchData;function hideSearch(){var e=document.querySelector("#search-container");"#search"===window.location.hash&&history.go(-1),window.onhashchange=null,e&&(e.style.display="none")}function listenKey(e){"Escape"===e.key&&(hideSearch(),window.removeEventListener("keyup",listenKey))}function showSearch(){var e=document.querySelector("#search-container"),n=document.querySelector("#search-input");window.onhashchange=hideSearch,"#search"!==window.location.hash&&history.pushState(null,null,"#search"),e&&(e.style.display="flex",window.addEventListener("keyup",listenKey)),n&&n.focus()}function fetchAllData(n={}){var e=baseURL+"data/search.json";fetch(e).then(function(e){return e.json()}).then(function(e){searchData=e.list,"function"==typeof n.onSuccess&&n.onSuccess(e.list)}).catch(function(e){console.error(e),"function"==typeof n.onError&&n.onError()})}function buildSearchResult(e){var n="";for(const r of e){var t=r.item;n+=`

    <a href="${r.item.link.replace('<a href="',"").replace(/">.*/,"")}" class="search-result-item">
      <div class="search-result-item-title">
          ${t.title}
      </div>
      <div class="search-result-item-p">
          ${t.description||"No description available."}
      </div>
    </a>
    `}return n}function getSearchResult(e,n,t){var n={shouldSort:!0,threshold:.4,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:n},r=Fuse.createIndex(n.keys,e),e=new Fuse(e,n,r).search(t);return e=20<e.length?e.slice(0,20):e}function debounce(t,r,o){var c;return function(){var e=this,n=arguments;clearTimeout(c),c=setTimeout(function(){c=null,o||t.apply(e,n)},r),o&&!c&&t.apply(e,n)}}function search(e){var n=e.target.value,t=document.querySelector("#search-result-c"),r=["title","description"];if(t)if(n){if(!searchData)return t.innerHTML="Loading...",void fetchAllData({onSuccess:function(e){console.log("Onsucess"),o(getSearchResult(e,r,n))},onError:function(){t.innerHTML="Failed to load result."}});o(getSearchResult(searchData,r,n))}else t.innerHTML="Type anything to view search result";else console.error("Search result container not found");function o(e){0===e.length?t.innerHTML="No result found! Try some different combination.":(e=buildSearchResult(e),t.innerHTML=e)}}function onDomContentLoaded(){var e=document.querySelector("#search-input"),n=document.querySelectorAll(".search-button"),t=document.querySelector("#search-container"),r=document.querySelector("#search-wrapper"),o=document.querySelector("#search-close-button"),c=debounce(search,300);o&&o.addEventListener("click",hideSearch),n&&n.forEach(function(e){e.addEventListener("click",showSearch)}),t&&t.addEventListener("click",hideSearch),r&&r.addEventListener("click",function(e){e.stopPropagation()}),e&&e.addEventListener("keyup",c)}window.addEventListener("DOMContentLoaded",onDomContentLoaded),window.addEventListener("hashchange",function(){"#search"===window.location.hash&&showSearch()});