<!DOCTYPE html><html lang="en" style="font-size:16px"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Home</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><script src="scripts/third-party/hljs.js" defer="defer"></script><script src="scripts/third-party/hljs-line-num.js" defer="defer"></script><script src="scripts/third-party/popper.js" defer="defer"></script><script src="scripts/third-party/tippy.js" defer="defer"></script><script src="scripts/third-party/tocbot.min.js"></script><script>var baseURL="/",locationPathname="",baseURL=(locationPathname=document.location.pathname).substr(0,locationPathname.lastIndexOf("/")+1)</script><link rel="stylesheet" href="styles/clean-jsdoc-theme.min.css"><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="font-size-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></symbol><symbol id="add-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol><symbol id="minus-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z"/></symbol><symbol id="dark-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol><symbol id="light-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol><symbol id="reset-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"/></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol><symbol id="codepen-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.5 13.202L13 15.535v3.596L19.197 15 16.5 13.202zM14.697 12L12 10.202 9.303 12 12 13.798 14.697 12zM20 10.869L18.303 12 20 13.131V10.87zM19.197 9L13 4.869v3.596l3.5 2.333L19.197 9zM7.5 10.798L11 8.465V4.869L4.803 9 7.5 10.798zM4.803 15L11 19.131v-3.596l-3.5-2.333L4.803 15zM4 13.131L5.697 12 4 10.869v2.262zM2 9a1 1 0 0 1 .445-.832l9-6a1 1 0 0 1 1.11 0l9 6A1 1 0 0 1 22 9v6a1 1 0 0 1-.445.832l-9 6a1 1 0 0 1-1.11 0l-9-6A1 1 0 0 1 2 15V9z"/></symbol><symbol id="close-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></symbol><symbol id="menu-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></symbol></defs></svg></head><body class="dark" data-theme="dark"><div class="sidebar-container"><div class="sidebar" id="sidebar"><a href="/" class="sidebar-title sidebar-title-anchor">Home</a><div class="sidebar-items-container"><div class="sidebar-section-title with-arrow" data-isopen="false" id="TwduZgAsL_3oDmZ_I1e5f"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-jskos-tools.html">jskos-tools</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="Nav22odA8OFG98BP_yE6h"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-jskos-tools.ConceptScheme.html">ConceptScheme</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="ZIXuMrrChQYMJyJgRgf8J"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#annotationCreatorMatches">annotationCreatorMatches</a></div><div class="sidebar-section-children"><a href="global.html#annotationCreatorName">annotationCreatorName</a></div><div class="sidebar-section-children"><a href="global.html#annotationCreatorUri">annotationCreatorUri</a></div><div class="sidebar-section-children"><a href="global.html#compareFunctions">compareFunctions</a></div><div class="sidebar-section-children"><a href="global.html#definition">definition</a></div><div class="sidebar-section-children"><a href="global.html#getLanguages">getLanguages</a></div><div class="sidebar-section-children"><a href="global.html#isValidUri">isValidUri</a></div><div class="sidebar-section-children"><a href="global.html#languageMapContent">languageMapContent</a></div><div class="sidebar-section-children"><a href="global.html#mappingRegistryIsStored">mappingRegistryIsStored</a></div><div class="sidebar-section-children"><a href="global.html#normalize">normalize</a></div><div class="sidebar-section-children"><a href="global.html#notation">notation</a></div><div class="sidebar-section-children"><a href="global.html#prefLabel">prefLabel</a></div><div class="sidebar-section-children"><a href="global.html#selectLanguage">selectLanguage</a></div><div class="sidebar-section-children"><a href="global.html#sha1">sha1</a></div><div class="sidebar-section-children"><a href="global.html#userOwnsMapping">userOwnsMapping</a></div></div></div></div></div><div class="navbar-container" id="VuAckcnZhf"><nav class="navbar"><div class="navbar-left-items"></div><div class="navbar-right-items"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div><nav></nav></nav></div><div class="toc-container"><div class="toc-content"><span class="bold">On this page</span><div id="eed4d2a0bfd64539bb9df78095dec881"></div></div></div><div class="body-wrapper"><div class="main-content"><div class="main-wrapper"><section class="readme"><article><h1 id="jskos-tools">JSKOS Tools</h1><p><a href="https://github.com/gbv/jskos-tools/actions/workflows/test-and-build.yml"><img src="https://github.com/gbv/jskos-tools/actions/workflows/test-and-build.yml/badge.svg" alt="Test"></a><a href="https://github.com/gbv/jskos-tools"><img src="https://img.shields.io/github/package-json/v/gbv/jskos-tools.svg?label=version" alt="GitHub package version"></a><a href="https://www.npmjs.com/package/jskos-tools"><img src="https://img.shields.io/badge/npm-jskos--tools-blue.svg" alt="NPM package name"></a><a href="https://github.com/RichardLitt/standard-readme"><img src="https://img.shields.io/badge/readme%20style-standard-brightgreen.svg" alt="standard-readme compliant"></a></p><blockquote><p>Tools for working with the JSKOS data format.</p></blockquote><p>This repository contains tools for working with the <a href="http://gbv.github.io/jskos/">JSKOS data format for knowledge organization systems</a>.</p><h2 id="table-of-contents">Table of Contents</h2><ul><li><a href="#install">Install</a></li><li><a href="#usage">Usage</a><ul><li><a href="#mapping-identifiers">Mapping Identifiers</a><ul><li><a href="#mappingcontentidentifier">mappingContentIdentifier</a></li><li><a href="#mappingmembersidentifier">mappingMembersIdentifier</a></li><li><a href="#addmappingidentifiers">addMappingIdentifiers</a></li><li><a href="#comparemappings">compareMappings</a></li><li><a href="#comparemappingmembers">compareMappingMembers</a></li></ul></li><li><a href="#conceptscheme">ConceptScheme</a></li><li><a href="#languagepreference">LanguagePreference</a></li><li><a href="#tools">Tools</a><ul><li><a href="#addcontext">addContext</a></li><li><a href="#clean">clean</a></li><li><a href="#copydeep">copyDeep</a></li><li><a href="#getalluris">getAllUris</a></li><li><a href="#compare">compare</a></li><li><a href="#isconcept">isConcept</a></li><li><a href="#isscheme">isScheme</a></li><li><a href="#iscontainedin">isContainedIn</a></li><li><a href="#sortconcepts">sortConcepts</a></li><li><a href="#sortschemes">sortSchemes</a></li><li><a href="#minifymapping">minifyMapping</a></li><li><a href="#mappingtypes">mappingTypes</a></li><li><a href="#mappingtypebyuri">mappingTypeByUri</a></li><li><a href="#mappingtypebytype">mappingTypeByType</a></li><li><a href="#defaultmappingtype">defaultMappingType</a></li><li><a href="#flattenmapping">flattenMapping</a></li><li><a href="#mappingcsv">mappingCSV</a></li><li><a href="#serializecsv">serializeCSV</a></li><li><a href="#conceptsofmapping">conceptsOfMapping</a></li><li><a href="#comparemappingsdeep">compareMappingsDeep</a></li><li><a href="#guessobjecttype">guessObjectType</a></li><li><a href="#objecttypes">objectTypes</a></li><li><a href="#matchobjecttypes">matchObjectTypes</a></li><li><a href="#mergeuris">mergeUris</a></li><li><a href="#merge">merge</a></li><li><a href="#normalize">normalize</a></li><li><a href="#isvaliduri">isValidUri</a></li><li><a href="#comparefunctions">compareFunctions</a></li><li><a href="#userownsmapping">userOwnsMapping</a></li><li><a href="#notation">notation</a></li><li><a href="#languagemapcontent">languageMapContent</a></li><li><a href="#preflabel">prefLabel</a></li><li><a href="#definition">definition</a></li><li><a href="#mappingregistryisstored">mappingRegistryIsStored</a></li><li><a href="#annotationcreatoruri">annotationCreatorUri</a></li><li><a href="#annotationcreatorname">annotationCreatorName</a></li><li><a href="#annotationcreatormatches">annotationCreatorMatches</a></li></ul></li></ul></li><li><a href="#build">Build</a></li><li><a href="#test">Test</a></li><li><a href="#maintainers">Maintainers</a></li><li><a href="#publish">Publish</a></li><li><a href="#contribute">Contribute</a></li><li><a href="#license">License</a></li></ul><h2 id="install">Install</h2><pre class="prettyprint source lang-bash"><code>npm i jskos-tools
</code></pre><p>We are also providing browser bundles:</p><ul><li>Development (not minified, ~19K gzipped, ~68K not gzipped): https://cdn.jsdelivr.net/npm/jskos-tools/dist/jskos-tools.js</li><li><strong>Production</strong> (minified, ~10K gzipped, ~26K not gzipped): https://cdn.jsdelivr.net/npm/jskos-tools@1/dist/jskos-tools.min.js</li></ul><p><a href="https://www.jsdelivr.com/package/npm/jskos-tools"><img src="https://data.jsdelivr.com/v1/package/npm/jskos-tools/badge?style=rounded" alt=""></a></p><h2 id="usage">Usage</h2><p>If you installed jskos-tools via npm, use it like this:</p><pre class="prettyprint source lang-js"><code>const jskos = require(&quot;jskos-tools&quot;)
</code></pre><p>Using the browser bundles will provide you with the <code>jskos</code> global variable.</p><p>See <a href="https:%5C/%5C/gbv.github.io/jskos-tools/">https://gbv.github.io/jskos-tools/</a> for full API documentation of <a href="https://gbv.github.io/jskos-tools/module-jskos-tools.html">module jskos-tools</a>.</p><h3 id="mapping-identifiers">Mapping Identifiers</h3><pre class="prettyprint source lang-js"><code>let mapping = {
  ...
}
</code></pre><h4 id="mappingcontentidentifier">mappingContentIdentifier</h4><p><code>mappingContentIdentifier</code> starts with urn:jskos:mapping:content: and takes concepts and type into consideration. It uses the <code>mappingContent</code> function to get relevant properties from the mapping.</p><pre class="prettyprint source lang-js"><code>let contentIdentifier = jskos.mappingContentIdentifier(mapping)
</code></pre><h4 id="mappingmembersidentifier">mappingMembersIdentifier</h4><p><code>mappingMembersIdentifier</code> starts with urn:jskos:mapping:members: and only takes concepts into consideration. It uses the <code>mappingMembers</code> function to get relevant properties from the mapping.</p><pre class="prettyprint source lang-js"><code>let membersIdentifier = jskos.mappingMembersIdentifier(mapping)
</code></pre><h4 id="addmappingidentifiers">addMappingIdentifiers</h4><p><code>addMappingIdentifiers</code> creates a new mapping with property &quot;identifiers&quot;, containing mappingContentIdentifier and mappingMembersIdentifier.</p><pre class="prettyprint source lang-js"><code>let mappingWithIdentifiers = jskos.addMappingIdentifiers(mapping)
</code></pre><h4 id="comparemappings">compareMappings</h4><p><code>compareMappings</code> compares two mappings based on their <code>mappingContentIdentifier</code>.</p><pre class="prettyprint source lang-js"><code>if (jskos.compareMappings(mapping1, mapping2)) { ... }
</code></pre><p>Aliases: <code>compareMappingContent</code></p><h4 id="comparemappingmembers">compareMappingMembers</h4><p><code>compareMappingMembers</code> compares two mappings based on their <code>mappingMembersIdentifier</code>.</p><pre class="prettyprint source lang-js"><code>if (jskos.compareMappingMembers(mapping1, mapping2)) { ... }
</code></pre><h3 id="conceptscheme">ConceptScheme</h3><p>See <a href="https://gbv.github.io/jskos-tools/module-jskos-tools.ConceptScheme.html">class ConceptScheme</a>.</p><h3 id="languagepreference">languagePreference</h3><p>Used to provide access to a preference list of language tags.</p><h4 id="how-to-configure">How to Configure</h4><p>If this is used inside a web application that allows multiple interface languages and depends on reactivity, it is necessary to properly configure this at the start of the application. There are two ways to do this:</p><ol><li>Provide a reference to the Vuex store and path where the language preference list of the application resides:</li></ol><pre class="prettyprint source lang-javascript"><code>const store = require(&quot;./store&quot;) // import the Vuex store
jskos.languagePreference.store = store
jskos.languagePreference.path = &quot;state.languages&quot; // or wherever your languages array resides
</code></pre><p>Note: In theory, <code>store</code> doesn't HAVE to be a Vuex store. It could be any kind of object which contains the <code>languages</code> array somewhere. (See also: <a href="https://github.com/gbv/jskos-tools/blob/master/test/language-preference.js#L34-L39">Tests</a>)</p><ol start="2"><li>Provide a reference to a preference list array of languages tags directly via <code>defaults</code>. Note: Make sure that this array only gets modified in-place, otherwise you will override the previous reference to the array. (Example using <a href="https://www.npmjs.com/package/array.prototype.move">array.prototype.move</a>.)</li></ol><pre class="prettyprint source lang-javascript"><code>const languages = [&quot;en&quot;, &quot;de&quot;]
jskos.languagePreference.defaults = languages
languages.move(1, 0) // moves &quot;de&quot; to the front of the preference list
</code></pre><h4 id="getlanguages">getLanguages</h4><p>Returns the current preference list of language tags (either from <code>store</code> or <code>defaults</code>).</p><h4 id="selectlanguage">selectLanguage</h4><p>Selects a language tag from a language map according to the current preference list or <code>null</code> if no language was found.</p><h3 id="tools">Tools</h3><h4 id="addcontext">addContext</h4><p>Add <code>@context</code> URI to a JSKOS object or to an array of JSKOS objects.</p><pre class="prettyprint source lang-js"><code>jskos.addContext(object)
</code></pre><h4 id="clean">clean</h4><p>Removes properties starting with <code>_</code> or containing only uppercase letters from a JSKOS object.</p><pre class="prettyprint source lang-js"><code>jskos.clean(object)
</code></pre><p>Aliases: <code>cleanJSKOS</code></p><h4 id="copydeep">copyDeep</h4><p>Creates a deep copy of a JSKOS object, replacing possibly circular structures with open world <code>[null]</code> statements. As the second argument it is possible to add additional properties that should be replaced with open world <code>[null]</code> statements. The third argument determines whether all properties starting with <code>_</code> should be ignored (<code>true</code> by default).</p><pre class="prettyprint source lang-js"><code>jskos.copyDeep(object)
jskos.copyDeep(object, [&quot;someCircularProperty&quot;])
jskos.copyDeep(object, null, false)
</code></pre><p>Aliases: <code>deepCopy</code></p><h4 id="getalluris">getAllUris</h4><p>Returns all possible URIs for a JSKOS object. Takes into consideration both the uri and identifier properties, as well as different variants of those identifiers. Returns an empty array if object is <code>null</code>.</p><pre class="prettyprint source lang-js"><code>jskos.getAllUris(object)
</code></pre><h4 id="compare">compare</h4><p>Compares two objects based on their URIs, using <code>getAllUris</code>. Returns <code>true</code> if both objects are <code>null</code>.</p><pre class="prettyprint source lang-js"><code>jskos.compare(object1, object2)
</code></pre><p>Aliases: <code>compareObjects</code>, <code>compareSchemes</code>, <code>compareConcepts</code></p><h4 id="isconcept">isConcept</h4><p>Checks whether JSKOS object is a concept based on type property.</p><pre class="prettyprint source lang-js"><code>jskos.isConcept(object)
</code></pre><h4 id="isscheme">isScheme</h4><p>Checks whether JSKOS object is a concept scheme based on type property.</p><pre class="prettyprint source lang-js"><code>jskos.isScheme(object)
</code></pre><h4 id="iscontainedin">isContainedIn</h4><p>// Checks whether an object is contained in a list of objects using <code>compare</code>.</p><pre class="prettyprint source lang-js"><code>jskos.isContainedIn(object, listOfObjects)
</code></pre><p>Aliases: <code>isSchemeInList</code></p><h4 id="sortconcepts">sortConcepts</h4><p>Sorts a list of concepts by their notation, then URI. Returns a copy of the list. If the second parameter is <code>true</code>, it will try to sort by numerical notations.</p><pre class="prettyprint source lang-js"><code>jskos.sortConcepts(concepts)
</code></pre><h4 id="sortschemes">sortSchemes</h4><p>Sorts a list of schemes by their prefLabel (de or en), then notation, then URI. Returns a copy of the list.</p><pre class="prettyprint source lang-js"><code>jskos.sortSchemes(schemes)
</code></pre><h4 id="minifymapping">minifyMapping</h4><p>Removes unnecessary properties from mapping before export or saving. In particular, all properties except for <code>to</code>, <code>from</code>, <code>toScheme</code>, <code>fromScheme</code>, <code>type</code>, <code>creator</code>, <code>contributor</code>, <code>created</code>, <code>modified</code>, <code>note</code>, and <code>identifier</code> on the mapping will be removed, and all properties except for <code>uri</code> and <code>notation</code> on concepts and schemes will be removed.</p><pre class="prettyprint source lang-js"><code>let newMapping = jskos.minifyMapping(mapping)
</code></pre><h4 id="mappingtypes">mappingTypes</h4><p>An array of mapping types in form of objects. Objects can have the following properties:</p><ul><li><code>notation</code> - an array of notations (in this case symbols)</li><li><code>uri</code> - the URI of the mapping type</li><li><code>prefLabel</code> - a language maps of labels</li><li><code>broader</code> - array of broader mapping types for this type</li><li><code>related</code> - array of related mapping types</li><li><code>RELEVANCE</code> - relevance label for GND terms (low, medium, high, very high)</li><li><code>SHORT</code> - a short name for the type, used for CSV import/export</li></ul><p>The labels are taken from Wikidata (see script <code>bin/localize-mapping-types</code>).</p><p>Example object:</p><pre class="prettyprint source lang-json"><code>{
  &quot;notation&quot;: [&quot;≈&quot;],
  &quot;uri&quot;: &quot;http://www.w3.org/2004/02/skos/core#closeMatch&quot;,
  &quot;prefLabel&quot;: { &quot;en&quot;: &quot;close match&quot; },
  &quot;broader&quot;: [ { &quot;uri&quot;: &quot;http://www.w3.org/2004/02/skos/core#mappingRelation&quot; } ],
  &quot;RELEVANCE&quot;: &quot;high&quot;,
  &quot;SHORT&quot;: &quot;close&quot;
}
</code></pre><h4 id="mappingtypebyuri">mappingTypeByUri</h4><p>Returns a mapping type object for an URI.</p><pre class="prettyprint source lang-js"><code>jskos.mappingTypeByUri(&quot;http://www.w3.org/2004/02/skos/core#closeMatch&quot;)
</code></pre><h4 id="mappingtypebytype">mappingTypeByType</h4><p>Returns a mapping type for a JSKOS type property. This is usually an array where the first type is taken, but a workaround for string types is included as well.</p><pre class="prettyprint source lang-js"><code>jskos.mappingTypeByType(mapping.type)
</code></pre><h4 id="defaultmappingtype">defaultMappingType</h4><p>The default mapping type (currently <code>mapping relation</code>).</p><h4 id="flattenmapping">flattenMapping</h4><p>Converts a mapping into a flat object with for serialization as CSV. Returns an object with fields <code>fromNotation</code>, <code>toNotation</code>, <code>type</code>, and (if option <code>language</code> has been provided) <code>fromLabel</code>, <code>toLabel</code>, and <code>creator</code>.</p><h4 id="mappingcsv">mappingCSV</h4><p>Returns an object of preconfigured conversion functions to convert mappings into CSV. Supports 1-to-1, 1-to-n, and n-to-n mappings.</p><pre class="prettyprint source lang-js"><code>// Initialize converter with default options
const csv = jskos.mappingCSV({
  delimiter: &quot;,&quot;,
  quoteChar: &quot;\&quot;&quot;,
  lineTerminator: &quot;\n&quot;,
  type: true,
  schemes: false,
  labels: false,
  creator: false,
  language: &quot;en&quot;,
})
// Header line for an array of mappings (assuming 1-to-1 mappings if no array is given)
csv.header(mappings)
// Single CSV line for a mapping (uses fromCount and toCount from the mapping by default)
csv.fromMapping(mapping, { fromCount: null, toCount: null })
// Multiline CSV from array of mappings (includes header by default)
csv.fromMappings(mappings, { header: true })
</code></pre><p>The order of the CSV fields is fromScheme, fromNotation, (fromLabel,) (fromNotation2, fromLabel2, ...) toNotation, (toLabel,) (toNotation2, toLabel2, ...) type, creator.</p><h4 id="serializecsv">serializeCSV</h4><p>Returns a function to serialize an array as CSV row as configured with <a href="https://frictionlessdata.io/specs/csv-dialect/">CSV Dialect</a>.</p><h4 id="conceptsofmapping">conceptsOfMapping</h4><p>Returns an array of concepts contained in a mapping. <code>side</code> can either be <code>from</code> or <code>to</code>. If <code>side</code> is left out, concepts from both sides will be returned. <code>null</code> values will be omitted.</p><pre class="prettyprint source lang-js"><code>jskos.conceptsOfMapping(mapping)
</code></pre><h4 id="comparemappingsdeep">compareMappingsDeep</h4><p><code>compareMappingsDeep</code> compares two mappings based on their properties. Concept sets and schemes are compared by URI.</p><pre class="prettyprint source lang-js"><code>if (jskos.compareMappingsDeep(mapping1, mapping2)) { ... }
</code></pre><h4 id="matchobjecttypes">matchObjectTypes</h4><p>Compares two JSKOS objects based on their types. Returns <code>false</code> only if both types could be guessed using <a href="#guessobjecttype"><code>guessObjectType</code></a> and they did not match, otherwise it will assume that the types match.</p><h4 id="mergeuris">mergeUris</h4><p>Merge URIs of two objects <code>a</code> and <code>b</code> into <code>a</code> by adding/removing URIs from identifier property.</p><h4 id="merge">merge</h4><p>Merges two JSKOS objects. See <a href="https://gbv.github.io/jskos-tools/module-jskos-tools.html#.merge">documentation</a> for more information.</p><h4 id="normalize">normalize</h4><p>Applies recursive unicode normalization to data.</p><h4 id="isvaliduri">isValidUri</h4><p>Checks whether a string is a valid URI.</p><h4 id="objecttypes">objectTypes</h4><p>An object that maps JSKOS object type names to their description.</p><h4 id="guessobjecttype">guessObjectType</h4><p>Guess the JSKOS object type of an object, URI or name and return its canonical name.</p><pre class="prettyprint source lang-js"><code>type = guessObjectType(objectOrString)        // get full name such as `ConceptScheme`
type = guessObjectType(objectOrString, true)  // get short name such as `scheme`
</code></pre><h4 id="comparefunctions">compareFunctions</h4><p>An object containing compare functions that can be used with <code>array.sort()</code> etc.</p><p>Available functions:</p><ul><li><code>compareFunctions.mappingsByConcepts</code> - compares mappings by the notations of their first concepts</li></ul><h4 id="userownsmapping">userOwnsMapping</h4><p>Determines whether a (<a href="https://github.com/gbv/login-server">login-server</a>-compatible) user owns a mapping (i.e. is the first <code>creator</code>) or not.</p><h4 id="notation">notation</h4><p>Returns the primary notation for a JSKOS Item. If there is no notation, it will return an empty string. Scheme notations will be uppercased.</p><h4 id="languagemapcontent">languageMapContent</h4><p>Returns the content of a language map for a JSKOS Item.</p><h4 id="preflabel">prefLabel</h4><p>Returns the prefLabel of a JSKOS Item. If there is no label, it will return the URI. If there is no URI, it will return an empty string.</p><h4 id="definition">definition</h4><p>Returns the definition of a JSKOS Item as an array. If there is no definition, an empty array will be returned.</p><h4 id="mappingregistryisstored">mappingRegistryIsStored</h4><p>Returns whether a mapping registry has stored mappings (<code>true</code> = database) or not (<code>false</code> = recommendations).</p><h4 id="annotationcreatoruri">annotationCreatorUri</h4><p>Returns the creator URI for an annotation.</p><h4 id="annotationcreatorname">annotationCreatorName</h4><p>Returns the craetor name for an annotation.</p><h4 id="annotationcreatormatches">annotationCreatorMatches</h4><p>Matches an annotation's creator URI against a list of URIs (e.g. from a user).</p><h2 id="build">Build</h2><pre class="prettyprint source lang-bash"><code>git clone --recursive https://github.com/gbv/jskos-tools.git
cd jskos-tools/
npm install
</code></pre><p>API documentation can be generated in directory <code>jsdoc/build</code>:</p><pre class="prettyprint source lang-bash"><code>npm run docs
</code></pre><h2 id="test">Test</h2><pre class="prettyprint source lang-bash"><code>npm test
</code></pre><h2 id="maintainers">Maintainers</h2><ul><li><a href="https://github.com/stefandesu">@stefandesu</a></li><li><a href="https://github.com/nichtich">@nichtich</a></li></ul><h2 id="publish">Publish</h2><p>Please work on the <code>dev</code> branch during development (or better yet, develop in a feature branch and merge into <code>dev</code> when ready).</p><p>When a new release is ready (i.e. the features are finished, merged into <code>dev</code>, and all tests succeed), run the included release script (replace &quot;patch&quot; with &quot;minor&quot; or &quot;major&quot; if necessary):</p><pre class="prettyprint source lang-bash"><code>npm run release:patch
</code></pre><p>This will:</p><ul><li>Run tests and build to make sure everything works</li><li>Switch to <code>dev</code></li><li>Make sure <code>dev</code> is up-to-date</li><li>Run <code>npm version patch</code> (or &quot;minor&quot;/&quot;major&quot;)</li><li>Push changes to <code>dev</code></li><li>Switch to <code>master</code></li><li>Merge changes from <code>dev</code></li><li>Push <code>master</code> with tags</li><li>Switch back to <code>dev</code></li></ul><p>After running this, GitHub Actions will automatically publish the new version to npm. It will also create a new GitHub Release draft. Please edit and publish the release manually.</p><h2 id="contribute">Contribute</h2><p>PRs accepted.</p><p>Small note: If editing the README, please conform to the <a href="https://github.com/RichardLitt/standard-readme">standard-readme</a> specification.</p><h2 id="license">License</h2><p>MIT © 2018 Verbundzentrale des GBV (VZG)</p></article></section></div></div></div><div class="search-container" id="PkfLWpAbet" style="display:none"><div class="wrapper" id="iCxFxjkHbP"><button class="icon-button search-close-button" id="VjLlGakifb" aria-label="close search"><svg><use xlink:href="#close-icon"></use></svg></button><div class="search-box-c"><svg><use xlink:href="#search-icon"></use></svg> <input type="text" id="vpcKVYIppa" class="search-input" placeholder="Search..." autofocus></div><div class="search-result-c" id="fWwVHRuDuN"><span class="search-result-c-text">Type anything to view search result</span></div></div></div><div class="mobile-menu-icon-container"><button class="icon-button" id="mobile-menu" data-isopen="false" aria-label="menu"><svg><use xlink:href="#menu-icon"></use></svg></button></div><div id="mobile-sidebar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><a href="/" class="sidebar-title sidebar-title-anchor">Home</a><div class="mobile-nav-links"></div><div class="mobile-sidebar-items-c"><div class="sidebar-section-title with-arrow" data-isopen="false" id="TwduZgAsL_3oDmZ_I1e5f"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-jskos-tools.html">jskos-tools</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="Nav22odA8OFG98BP_yE6h"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-jskos-tools.ConceptScheme.html">ConceptScheme</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="ZIXuMrrChQYMJyJgRgf8J"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#annotationCreatorMatches">annotationCreatorMatches</a></div><div class="sidebar-section-children"><a href="global.html#annotationCreatorName">annotationCreatorName</a></div><div class="sidebar-section-children"><a href="global.html#annotationCreatorUri">annotationCreatorUri</a></div><div class="sidebar-section-children"><a href="global.html#compareFunctions">compareFunctions</a></div><div class="sidebar-section-children"><a href="global.html#definition">definition</a></div><div class="sidebar-section-children"><a href="global.html#getLanguages">getLanguages</a></div><div class="sidebar-section-children"><a href="global.html#isValidUri">isValidUri</a></div><div class="sidebar-section-children"><a href="global.html#languageMapContent">languageMapContent</a></div><div class="sidebar-section-children"><a href="global.html#mappingRegistryIsStored">mappingRegistryIsStored</a></div><div class="sidebar-section-children"><a href="global.html#normalize">normalize</a></div><div class="sidebar-section-children"><a href="global.html#notation">notation</a></div><div class="sidebar-section-children"><a href="global.html#prefLabel">prefLabel</a></div><div class="sidebar-section-children"><a href="global.html#selectLanguage">selectLanguage</a></div><div class="sidebar-section-children"><a href="global.html#sha1">sha1</a></div><div class="sidebar-section-children"><a href="global.html#userOwnsMapping">userOwnsMapping</a></div></div></div><div class="mobile-navbar-actions"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div></div></div><script type="text/javascript" src="scripts/core.min.js"></script><script src="scripts/search.min.js" defer="defer"></script><script src="scripts/third-party/fuse.js" defer="defer"></script><script type="text/javascript">var tocbotInstance=tocbot.init({tocSelector:"#eed4d2a0bfd64539bb9df78095dec881",contentSelector:".main-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,scrollContainer:".main-content",headingsOffset:130,onClick:bringLinkToView})</script></body></html>